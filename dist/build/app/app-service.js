if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then(a=>t.resolve(e()).then(()=>a),a=>t.resolve(e()).then(()=>{throw a}))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e,t,...a){uni.__log__?uni.__log__(e,t,...a):console[e].apply(console,[...a,t])}const a=(e,t)=>{const a=e.__vccOpts||e;for(const[o,n]of t)a[o]=n;return a};const o=a({},[["render",function(t,a,o,n,s,i){return e.openBlock(),e.createElementBlock("view",{class:"home-container"},[e.createElementVNode("h1",null,"首页")])}]]);const n=a({data:()=>({}),methods:{goToProfile(){uni.showToast({title:"个人资料",icon:"none"})},goToSettings(){uni.showToast({title:"设置",icon:"none"})},goToHelp(){uni.showToast({title:"帮助中心",icon:"none"})}}},[["render",function(t,a,o,n,s,i){return e.openBlock(),e.createElementBlock("view",{class:"user-page"},[e.createElementVNode("h1",null,"个人中心")])}],["__scopeId","data-v-c1a77d1c"]]);const s=a({},[["render",function(t,a,o,n,s,i){return e.openBlock(),e.createElementBlock("view",{class:"doctor-page"},[e.createElementVNode("h1",null,"财富")])}]]);const i=a({name:"LifePage",data:()=>({activeCategory:0,categories:["精选","活动","折扣","品牌"],quickServices:[{icon:"⚡",label:"生活缴费",bgColor:"#00D4AA",action:"payment"},{icon:"¥",label:"手机充值",bgColor:"#FF9500",action:"recharge"},{icon:"👥",label:"政务民生",bgColor:"#34C759",action:"government"},{icon:"🎯",label:"小豆乐园",bgColor:"#FF6B35",action:"games"}],allServices:[{icon:"🏫",label:"校园",bgColor:"#5AC8FA",action:"campus"},{icon:"⚡",label:"食堂",bgColor:"#30D158",action:"canteen"},{icon:"🎉",label:"党费",bgColor:"#FF3B30",action:"party"},{icon:"👨‍⚕️",label:"养老服务",bgColor:"#007AFF",action:"elderly"},{icon:"📄",label:"社保医保",bgColor:"#34C759",action:"insurance"},{icon:"🌿",label:"低碳空间",bgColor:"#32D74B",action:"carbon"},{icon:"🎫",label:"优惠卡券",bgColor:"#AF52DE",action:"coupons"},{icon:"🎁",label:"京东特惠",bgColor:"#FF9500",action:"jd"},{icon:"🏪",label:"城市专区",bgColor:"#5856D6",action:"city"},{icon:"🎊",label:"热门活动",bgColor:"#FF2D92",action:"events"}]}),onLoad(){this.initPage()},methods:{initPage(){t("log","at pages/life/life.vue:230","生活页面初始化")},handleServiceTap(e){switch(t("log","at pages/life/life.vue:234","点击服务:",e),e.action){case"payment":this.goToPayment();break;case"recharge":this.goToRecharge();break;case"government":this.goToGovernment();break;case"games":this.goToGames();break;default:uni.showToast({title:`即将跳转到${e.label}`,icon:"none"})}},switchCategory(e){this.activeCategory=e,t("log","at pages/life/life.vue:259","切换分类:",this.categories[e])},goToPayment(){t("log","at pages/life/life.vue:263","跳转到生活缴费页面"),uni.navigateTo({url:"/pages/payment/payment",success:()=>{t("log","at pages/life/life.vue:267","成功跳转到生活缴费页面")},fail:e=>{t("error","at pages/life/life.vue:270","跳转失败:",e),uni.showToast({title:"页面跳转失败",icon:"none"})}})},goToRecharge(){t("log","at pages/life/life.vue:280","跳转到手机充值页面"),uni.navigateTo({url:"/pages/recharge/recharge",success:()=>{t("log","at pages/life/life.vue:284","成功跳转到手机充值页面")},fail:e=>{t("error","at pages/life/life.vue:287","跳转失败:",e),uni.showToast({title:"页面跳转失败",icon:"none"})}})},goToGovernment(){uni.navigateTo({url:"/pages/government/government"})},goToGames(){uni.navigateTo({url:"/pages/games/games"})}}},[["render",function(t,a,o,n,s,i){return e.openBlock(),e.createElementBlock("view",{class:"life-page"},[e.createElementVNode("view",{class:"header-section"},[e.createElementVNode("view",{class:"location-info"},[e.createElementVNode("view",{class:"location-icon"},"📍"),e.createElementVNode("text",{class:"location-text"},"牡丹江")]),e.createElementVNode("view",{class:"search-container"},[e.createElementVNode("view",{class:"search-box"},[e.createElementVNode("view",{class:"search-icon"},"🔍"),e.createElementVNode("input",{class:"search-input",placeholder:"本地优惠","placeholder-style":"color: rgba(255,255,255,0.7)"}),e.createElementVNode("view",{class:"voice-icon"},"🎤")])]),e.createElementVNode("view",{class:"header-actions"},[e.createElementVNode("view",{class:"action-item"},[e.createElementVNode("text",{class:"action-icon"},"📝"),e.createElementVNode("text",{class:"action-text"},"记事")]),e.createElementVNode("view",{class:"action-item"},[e.createElementVNode("text",{class:"action-icon"},"🗂️"),e.createElementVNode("text",{class:"action-text"},"卡券")])])]),e.createElementVNode("view",{class:"banner-section"},[e.createElementVNode("swiper",{class:"banner-swiper","indicator-dots":!0,autoplay:!0,interval:3e3,"indicator-color":"rgba(255,255,255,0.5)","indicator-active-color":"#fff"},[e.createElementVNode("swiper-item",null,[e.createElementVNode("view",{class:"banner-item"},[e.createElementVNode("text",{class:"banner-title"},"京东购物用农行信用卡"),e.createElementVNode("text",{class:"banner-subtitle"},"积分抵现至高10%"),e.createElementVNode("image",{class:"banner-image",src:"/static/banner1.png",mode:"aspectFit"})])]),e.createElementVNode("swiper-item",null,[e.createElementVNode("view",{class:"banner-item"},[e.createElementVNode("text",{class:"banner-title"},"生活缴费享优惠"),e.createElementVNode("text",{class:"banner-subtitle"},"水电燃气一键支付"),e.createElementVNode("image",{class:"banner-image",src:"/static/banner2.png",mode:"aspectFit"})])])])]),e.createElementVNode("view",{class:"quick-services"},[e.createElementVNode("view",{class:"services-grid"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.quickServices,(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"service-item",key:a,onClick:e=>i.handleServiceTap(t)},[e.createElementVNode("view",{class:"service-icon",style:e.normalizeStyle({backgroundColor:t.bgColor})},[e.createElementVNode("text",{class:"icon-text"},e.toDisplayString(t.icon),1)],4),e.createElementVNode("text",{class:"service-label"},e.toDisplayString(t.label),1)],8,["onClick"]))),128))])]),e.createElementVNode("view",{class:"all-services"},[e.createElementVNode("view",{class:"services-grid-large"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.allServices,(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"service-item-large",key:a,onClick:e=>i.handleServiceTap(t)},[e.createElementVNode("view",{class:"service-icon-large",style:e.normalizeStyle({backgroundColor:t.bgColor})},[e.createElementVNode("text",{class:"icon-text-large"},e.toDisplayString(t.icon),1)],4),e.createElementVNode("text",{class:"service-label-large"},e.toDisplayString(t.label),1)],8,["onClick"]))),128))])]),e.createElementVNode("view",{class:"category-nav"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.categories,(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["nav-item",{active:s.activeCategory===a}]),key:a,onClick:e=>i.switchCategory(a)},[e.createElementVNode("text",{class:"nav-text"},e.toDisplayString(t),1)],10,["onClick"]))),128))]),e.createElementVNode("view",{class:"promotion-section"},[e.createElementVNode("view",{class:"promotion-cards"},[e.createElementVNode("view",{class:"promotion-card large"},[e.createElementVNode("view",{class:"card-content"},[e.createElementVNode("text",{class:"card-title"},"积分当钱花"),e.createElementVNode("text",{class:"card-subtitle"},"至高抵现50%"),e.createElementVNode("text",{class:"card-desc"},"积分当钱花优惠手不..."),e.createElementVNode("text",{class:"card-detail"},"至高抵现50%"),e.createElementVNode("image",{class:"card-mascot",src:"/static/frog-mascot.png",mode:"aspectFit"})])]),e.createElementVNode("view",{class:"promotion-cards-right"},[e.createElementVNode("view",{class:"promotion-card small"},[e.createElementVNode("text",{class:"card-title-small"},"车票优惠享"),e.createElementVNode("text",{class:"card-subtitle-small"},"最高88元12306立减金"),e.createElementVNode("image",{class:"card-bg",src:"/static/train-bg.png",mode:"aspectFill"})]),e.createElementVNode("view",{class:"promotion-card small"},[e.createElementVNode("text",{class:"card-title-small"},"茶颜优惠券"),e.createElementVNode("text",{class:"card-subtitle-small"},"新用户专享首杯至5.9元"),e.createElementVNode("image",{class:"card-bg",src:"/static/tea-bg.png",mode:"aspectFill"})])])])])])}],["__scopeId","data-v-63c3c28d"]]),r=e=>new Promise((a,o)=>{let n={url:"https://api.abchina.com"+e.url,method:e.method||"GET",data:e.data||{},header:e.header||{},timeout:e.timeout||1e4};n=(e=>{const t=uni.getStorageSync("token");return t&&(e.header={...e.header,Authorization:`Bearer ${t}`}),e.header={"Content-Type":"application/json","X-Client-Type":"uni-app",...e.header},e})(n),uni.request({...n,success:e=>{try{const t=(e=>{const{statusCode:t,data:a}=e;return 200===t?0===a.code?a.data:(uni.showToast({title:a.message||"请求失败",icon:"none"}),Promise.reject(a)):401===t?(uni.removeStorageSync("token"),uni.removeStorageSync("userInfo"),uni.navigateTo({url:"/login/login"}),Promise.reject("登录已过期")):(uni.showToast({title:"网络错误，请稍后重试",icon:"none"}),Promise.reject("网络错误"))})(e);a(t)}catch(t){o(t)}},fail:e=>{t("error","at utils/request.js:98","请求失败:",e),uni.showToast({title:"网络连接失败",icon:"none"}),o(e)}})}),l=(e,t={})=>r({url:e+(Object.keys(t).length?"?"+new URLSearchParams(t).toString():""),method:"GET"}),c=(e,t={})=>r({url:e,method:"POST",data:t});const m=a({name:"PaymentPage",data:()=>({selectedType:null,paymentForm:{number:"",address:"",amount:""},paymentTypes:[{icon:"💡",label:"电费",bgColor:"#FFD700",type:"electric",numberLabel:"电费户号",showAddress:!0},{icon:"💧",label:"水费",bgColor:"#1E90FF",type:"water",numberLabel:"水费户号",showAddress:!0},{icon:"🔥",label:"燃气费",bgColor:"#FF6347",type:"gas",numberLabel:"燃气户号",showAddress:!0},{icon:"📱",label:"话费",bgColor:"#32CD32",type:"phone",numberLabel:"手机号码",showAddress:!1},{icon:"📺",label:"有线电视",bgColor:"#9370DB",type:"tv",numberLabel:"用户编号",showAddress:!0},{icon:"🌐",label:"宽带费",bgColor:"#FF1493",type:"internet",numberLabel:"宽带账号",showAddress:!0}],paymentHistory:[{typeIcon:"💡",title:"电费缴费",detail:"户号: 123456789",amount:"156.80",status:"成功"},{typeIcon:"💧",title:"水费缴费",detail:"户号: 987654321",amount:"89.50",status:"成功"},{typeIcon:"📱",title:"话费充值",detail:"手机: 138****8888",amount:"100.00",status:"成功"}]}),computed:{canSubmit(){return this.paymentForm.number&&this.paymentForm.amount&&(!this.selectedType.showAddress||this.paymentForm.address)}},onLoad(){this.loadPaymentHistory()},methods:{selectPaymentType(e){this.selectedType=e,this.paymentForm={number:"",address:"",amount:""}},async queryBill(){var e;if(this.paymentForm.number)try{uni.showLoading({title:"查询中..."});const t=await(e={type:this.selectedType.type,number:this.paymentForm.number,address:this.paymentForm.address},c("/life/utility/query",e));t.amount?(this.paymentForm.amount=t.amount.toString(),uni.showToast({title:"查询成功",icon:"success"})):uni.showToast({title:"暂无待缴费用",icon:"none"})}catch(t){uni.showToast({title:"查询失败，请稍后重试",icon:"none"})}finally{uni.hideLoading()}else uni.showToast({title:`请输入${this.selectedType.numberLabel}`,icon:"none"})},async submitPayment(){var e;if(this.canSubmit)try{uni.showLoading({title:"缴费中..."}),await(e={type:this.selectedType.type,number:this.paymentForm.number,address:this.paymentForm.address,amount:parseFloat(this.paymentForm.amount)},c("/life/payment",e)),uni.showToast({title:"缴费成功",icon:"success"}),this.loadPaymentHistory(),this.paymentForm={number:"",address:"",amount:""}}catch(t){uni.showToast({title:"缴费失败，请稍后重试",icon:"none"})}finally{uni.hideLoading()}},async loadPaymentHistory(){try{const t=await(e={limit:3},l("/life/payment-history",e));this.paymentHistory=t}catch(a){t("error","at pages/payment/payment.vue:298","加载缴费记录失败:",a)}var e},viewAllHistory(){uni.navigateTo({url:"/pages/payment-history/payment-history"})}}},[["render",function(t,a,o,n,s,i){return e.openBlock(),e.createElementBlock("view",{class:"payment-page"},[e.createElementVNode("view",{class:"page-header"},[e.createElementVNode("text",{class:"header-title"},"生活缴费"),e.createElementVNode("text",{class:"header-subtitle"},"水电燃气一键支付")]),e.createElementVNode("view",{class:"payment-types"},[e.createElementVNode("view",{class:"types-grid"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.paymentTypes,(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"type-item",key:a,onClick:e=>i.selectPaymentType(t)},[e.createElementVNode("view",{class:"type-icon",style:e.normalizeStyle({backgroundColor:t.bgColor})},[e.createElementVNode("text",{class:"icon-text"},e.toDisplayString(t.icon),1)],4),e.createElementVNode("text",{class:"type-label"},e.toDisplayString(t.label),1)],8,["onClick"]))),128))])]),s.selectedType?(e.openBlock(),e.createElementBlock("view",{key:0,class:"payment-form"},[e.createElementVNode("view",{class:"form-section"},[e.createElementVNode("view",{class:"section-title"},[e.createElementVNode("text",null,e.toDisplayString(s.selectedType.label)+"缴费",1)]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("text",{class:"form-label"},e.toDisplayString(s.selectedType.numberLabel),1),e.withDirectives(e.createElementVNode("input",{class:"form-input","onUpdate:modelValue":a[0]||(a[0]=e=>s.paymentForm.number=e),placeholder:`请输入${s.selectedType.numberLabel}`,type:"text"},null,8,["placeholder"]),[[e.vModelText,s.paymentForm.number]])]),s.selectedType.showAddress?(e.openBlock(),e.createElementBlock("view",{key:0,class:"form-item"},[e.createElementVNode("text",{class:"form-label"},"缴费地址"),e.withDirectives(e.createElementVNode("input",{class:"form-input","onUpdate:modelValue":a[1]||(a[1]=e=>s.paymentForm.address=e),placeholder:"请输入详细地址",type:"text"},null,512),[[e.vModelText,s.paymentForm.address]])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("text",{class:"form-label"},"缴费金额"),e.withDirectives(e.createElementVNode("input",{class:"form-input amount-input","onUpdate:modelValue":a[2]||(a[2]=e=>s.paymentForm.amount=e),placeholder:"请输入缴费金额",type:"digit"},null,512),[[e.vModelText,s.paymentForm.amount]])])]),e.createElementVNode("view",{class:"payment-actions"},[e.createElementVNode("button",{class:"query-btn",onClick:a[3]||(a[3]=(...e)=>i.queryBill&&i.queryBill(...e))},"查询账单"),e.createElementVNode("button",{class:"pay-btn",onClick:a[4]||(a[4]=(...e)=>i.submitPayment&&i.submitPayment(...e)),disabled:!i.canSubmit}," 立即缴费 ",8,["disabled"])])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"payment-history"},[e.createElementVNode("view",{class:"history-header"},[e.createElementVNode("text",{class:"history-title"},"最近缴费记录"),e.createElementVNode("text",{class:"view-all",onClick:a[5]||(a[5]=(...e)=>i.viewAllHistory&&i.viewAllHistory(...e))},"查看全部")]),e.createElementVNode("view",{class:"history-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.paymentHistory,(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"history-item",key:a},[e.createElementVNode("view",{class:"record-icon"},[e.createElementVNode("text",null,e.toDisplayString(t.typeIcon),1)]),e.createElementVNode("view",{class:"record-info"},[e.createElementVNode("text",{class:"record-title"},e.toDisplayString(t.title),1),e.createElementVNode("text",{class:"record-detail"},e.toDisplayString(t.detail),1)]),e.createElementVNode("view",{class:"record-amount"},[e.createElementVNode("text",{class:"amount"},"-¥"+e.toDisplayString(t.amount),1),e.createElementVNode("text",{class:"status"},e.toDisplayString(t.status),1)])]))),128))])])])}],["__scopeId","data-v-8f266a65"]]);const d=a({name:"RechargePage",data:()=>({activeType:0,selectedAmount:null,customAmount:"",rechargeForm:{phone:""},carrierInfo:{name:"",location:""},rechargeTypes:[{label:"话费充值",type:"phone"},{label:"流量充值",type:"data"}],phoneAmounts:[{value:10,desc:"话费"},{value:20,desc:"话费"},{value:30,desc:"话费"},{value:50,desc:"话费",discount:"95折"},{value:100,desc:"话费",discount:"95折"},{value:200,desc:"话费",discount:"9折"}],dataAmounts:[{value:10,desc:"1GB流量包"},{value:20,desc:"3GB流量包"},{value:30,desc:"5GB流量包"},{value:50,desc:"10GB流量包",discount:"送2GB"},{value:100,desc:"30GB流量包",discount:"送10GB"},{value:150,desc:"50GB流量包",discount:"送20GB"}],rechargeHistory:[{phone:"138****8888",amount:"50",time:"2024-01-15 14:30",status:"成功"},{phone:"139****9999",amount:"100",time:"2024-01-10 09:15",status:"成功"}]}),computed:{currentAmounts(){return 0===this.activeType?this.phoneAmounts:this.dataAmounts},finalAmount(){return this.selectedAmount||this.customAmount||0},canSubmit(){return 11===this.rechargeForm.phone.length&&this.finalAmount>0}},methods:{onPhoneInput(){11===this.rechargeForm.phone.length?this.getCarrierInfo():this.carrierInfo={name:"",location:""}},getCarrierInfo(){const e=this.rechargeForm.phone.substring(0,3);let t="";["130","131","132","155","156","185","186"].includes(e)?t="中国联通":["134","135","136","137","138","139","150","151","152","157","158","159","182","183","184","187","188"].includes(e)?t="中国移动":["133","153","180","181","189"].includes(e)&&(t="中国电信"),this.carrierInfo={name:t,location:"黑龙江 牡丹江"}},switchType(e){this.activeType=e,this.selectedAmount=null,this.customAmount=""},selectAmount(e){this.selectedAmount=e.value,this.customAmount=""},onCustomAmountInput(){this.selectedAmount=null},selectFromContacts(){uni.showActionSheet({itemList:["138****8888","139****9999","137****7777"],success:e=>{this.rechargeForm.phone=["13812348888","13912349999","13712347777"][e.tapIndex],this.getCarrierInfo()}})},async submitRecharge(){var e;if(this.canSubmit)try{uni.showLoading({title:"充值中..."}),await(e={phone:this.rechargeForm.phone,amount:this.finalAmount,type:this.rechargeTypes[this.activeType].type},c("/life/recharge",e)),uni.showToast({title:"充值成功",icon:"success"}),this.rechargeHistory.unshift({phone:this.rechargeForm.phone.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"),amount:this.finalAmount.toString(),time:(new Date).toLocaleString(),status:"成功"}),this.rechargeForm.phone="",this.selectedAmount=null,this.customAmount="",this.carrierInfo={name:"",location:""}}catch(t){uni.showToast({title:"充值失败，请稍后重试",icon:"none"})}finally{uni.hideLoading()}},viewAllHistory(){uni.navigateTo({url:"/pages/recharge-history/recharge-history"})}}},[["render",function(t,a,o,n,s,i){return e.openBlock(),e.createElementBlock("view",{class:"recharge-page"},[e.createElementVNode("view",{class:"page-header"},[e.createElementVNode("text",{class:"header-title"},"手机充值"),e.createElementVNode("text",{class:"header-subtitle"},"话费流量一键充值")]),e.createElementVNode("view",{class:"recharge-form"},[e.createElementVNode("view",{class:"form-section"},[e.createElementVNode("view",{class:"phone-input-section"},[e.createElementVNode("view",{class:"input-row"},[e.withDirectives(e.createElementVNode("input",{class:"phone-input","onUpdate:modelValue":a[0]||(a[0]=e=>s.rechargeForm.phone=e),placeholder:"请输入手机号码",type:"number",maxlength:"11",onInput:a[1]||(a[1]=(...e)=>i.onPhoneInput&&i.onPhoneInput(...e))},null,544),[[e.vModelText,s.rechargeForm.phone]]),e.createElementVNode("button",{class:"contacts-btn",onClick:a[2]||(a[2]=(...e)=>i.selectFromContacts&&i.selectFromContacts(...e))},"📞")]),s.carrierInfo.name?(e.openBlock(),e.createElementBlock("view",{key:0,class:"carrier-info"},[e.createElementVNode("text",{class:"carrier-name"},e.toDisplayString(s.carrierInfo.name),1),e.createElementVNode("text",{class:"carrier-location"},e.toDisplayString(s.carrierInfo.location),1)])):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"recharge-types"},[e.createElementVNode("view",{class:"type-tabs"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.rechargeTypes,(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["tab-item",{active:s.activeType===a}]),key:a,onClick:e=>i.switchType(a)},[e.createElementVNode("text",{class:"tab-text"},e.toDisplayString(t.label),1)],10,["onClick"]))),128))])]),e.createElementVNode("view",{class:"amount-section"},[e.createElementVNode("view",{class:"amount-grid"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.currentAmounts,(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["amount-item",{selected:s.selectedAmount===t.value}]),key:a,onClick:e=>i.selectAmount(t)},[e.createElementVNode("text",{class:"amount-value"},"¥"+e.toDisplayString(t.value),1),t.desc?(e.openBlock(),e.createElementBlock("text",{key:0,class:"amount-desc"},e.toDisplayString(t.desc),1)):e.createCommentVNode("",!0),t.discount?(e.openBlock(),e.createElementBlock("view",{key:1,class:"discount-tag"},[e.createElementVNode("text",{class:"discount-text"},e.toDisplayString(t.discount),1)])):e.createCommentVNode("",!0)],10,["onClick"]))),128))])]),e.createElementVNode("view",{class:"custom-amount"},[e.createElementVNode("text",{class:"custom-label"},"自定义金额"),e.withDirectives(e.createElementVNode("input",{class:"custom-input","onUpdate:modelValue":a[3]||(a[3]=e=>s.customAmount=e),placeholder:"输入其他金额",type:"digit",onInput:a[4]||(a[4]=(...e)=>i.onCustomAmountInput&&i.onCustomAmountInput(...e))},null,544),[[e.vModelText,s.customAmount]])])]),e.createElementVNode("view",{class:"recharge-actions"},[e.createElementVNode("button",{class:"recharge-btn",onClick:a[5]||(a[5]=(...e)=>i.submitRecharge&&i.submitRecharge(...e)),disabled:!i.canSubmit}," 立即充值 ¥"+e.toDisplayString(i.finalAmount),9,["disabled"])])]),e.createElementVNode("view",{class:"recharge-history"},[e.createElementVNode("view",{class:"history-header"},[e.createElementVNode("text",{class:"history-title"},"最近充值记录"),e.createElementVNode("text",{class:"view-all",onClick:a[6]||(a[6]=(...e)=>i.viewAllHistory&&i.viewAllHistory(...e))},"查看全部")]),e.createElementVNode("view",{class:"history-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.rechargeHistory,(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"history-item",key:a},[e.createElementVNode("view",{class:"record-info"},[e.createElementVNode("text",{class:"record-phone"},e.toDisplayString(t.phone),1),e.createElementVNode("text",{class:"record-time"},e.toDisplayString(t.time),1)]),e.createElementVNode("view",{class:"record-amount"},[e.createElementVNode("text",{class:"amount"},"¥"+e.toDisplayString(t.amount),1),e.createElementVNode("text",{class:"status"},e.toDisplayString(t.status),1)])]))),128))])])])}],["__scopeId","data-v-ca4c90fa"]]);const u=a({name:"GovernmentPage",data:()=>({activeCategory:0,categories:[{name:"证件办理",type:"certificate"},{name:"社会保障",type:"social"},{name:"税务服务",type:"tax"},{name:"公积金",type:"fund"}],certificateServices:[{icon:"🆔",label:"身份证",desc:"身份证办理",bgColor:"#007AFF",action:"id_card"},{icon:"📄",label:"户口本",desc:"户籍证明",bgColor:"#34C759",action:"household"},{icon:"🚗",label:"驾驶证",desc:"驾照服务",bgColor:"#FF9500",action:"license"},{icon:"🏠",label:"房产证",desc:"不动产证",bgColor:"#AF52DE",action:"property"}],socialServices:[{icon:"🏥",label:"医保查询",desc:"医保信息",bgColor:"#FF3B30",action:"medical"},{icon:"👴",label:"养老保险",desc:"养老服务",bgColor:"#5AC8FA",action:"pension"},{icon:"💼",label:"失业保险",desc:"失业金",bgColor:"#FFCC02",action:"unemployment"},{icon:"👶",label:"生育保险",desc:"生育津贴",bgColor:"#FF2D92",action:"maternity"}],taxServices:[{icon:"💰",label:"个税查询",desc:"个人所得税",bgColor:"#32D74B",action:"personal_tax"},{icon:"🏢",label:"企业税务",desc:"企业纳税",bgColor:"#5856D6",action:"enterprise_tax"},{icon:"📊",label:"纳税证明",desc:"完税证明",bgColor:"#FF6B35",action:"tax_proof"},{icon:"📋",label:"税务登记",desc:"税务注册",bgColor:"#64D2FF",action:"tax_register"}],fundServices:[{icon:"🏦",label:"公积金查询",desc:"账户查询",bgColor:"#007AFF",action:"fund_query"},{icon:"💸",label:"公积金提取",desc:"提取申请",bgColor:"#34C759",action:"fund_withdraw"},{icon:"🏠",label:"公积金贷款",desc:"贷款申请",bgColor:"#FF9500",action:"fund_loan"},{icon:"📝",label:"缴存证明",desc:"缴存证明",bgColor:"#AF52DE",action:"fund_proof"}],hotServices:[{icon:"🆔",title:"身份证办理进度查询",subtitle:"实时查看办证进度",action:"id_progress"},{icon:"🏥",title:"医保电子凭证",subtitle:"医保卡电子化服务",action:"medical_card"},{icon:"💰",title:"个税年度汇算",subtitle:"个人所得税汇算清缴",action:"tax_settlement"},{icon:"🏠",title:"不动产登记查询",subtitle:"房产信息查询服务",action:"property_query"}],guides:[{title:"身份证首次申领",tag:"常用",desc:"16周岁以上首次申请身份证办理流程",steps:3},{title:"医保异地就医备案",tag:"热门",desc:"异地就医前的备案登记办理指南",steps:4},{title:"公积金贷款申请",tag:"推荐",desc:"购房公积金贷款申请条件及流程",steps:5}]}),computed:{currentServices(){switch(this.activeCategory){case 0:default:return this.certificateServices;case 1:return this.socialServices;case 2:return this.taxServices;case 3:return this.fundServices}}},methods:{switchCategory(e){this.activeCategory=e},handleServiceTap(e){t("log","at pages/government/government.vue:292","点击政务服务:",e),uni.showToast({title:`即将跳转到${e.label||e.title}`,icon:"none"})},viewGuide(e){t("log","at pages/government/government.vue:300","查看办事指南:",e),uni.showToast({title:`查看${e.title}指南`,icon:"none"})},goBack(){uni.navigateBack()}}},[["render",function(t,a,o,n,s,i){return e.openBlock(),e.createElementBlock("view",{class:"government-page"},[e.createElementVNode("view",{class:"page-header"},[e.createElementVNode("text",{class:"header-title"},"政务民生"),e.createElementVNode("text",{class:"header-subtitle"},"便民服务 一键办理")]),e.createElementVNode("view",{class:"service-categories"},[e.createElementVNode("view",{class:"category-tabs"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.categories,(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["tab-item",{active:s.activeCategory===a}]),key:a,onClick:e=>i.switchCategory(a)},[e.createElementVNode("text",{class:"tab-text"},e.toDisplayString(t.name),1)],10,["onClick"]))),128))])]),e.createElementVNode("view",{class:"government-services"},[e.createElementVNode("view",{class:"services-grid"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.currentServices,(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"service-item",key:a,onClick:e=>i.handleServiceTap(t)},[e.createElementVNode("view",{class:"service-icon",style:e.normalizeStyle({backgroundColor:t.bgColor})},[e.createElementVNode("text",{class:"icon-text"},e.toDisplayString(t.icon),1)],4),e.createElementVNode("text",{class:"service-label"},e.toDisplayString(t.label),1),e.createElementVNode("text",{class:"service-desc"},e.toDisplayString(t.desc),1)],8,["onClick"]))),128))])]),e.createElementVNode("view",{class:"hot-services"},[e.createElementVNode("view",{class:"section-header"},[e.createElementVNode("text",{class:"section-title"},"🔥 热门服务")]),e.createElementVNode("view",{class:"hot-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.hotServices,(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"hot-item",key:a,onClick:e=>i.handleServiceTap(t)},[e.createElementVNode("view",{class:"hot-icon"},[e.createElementVNode("text",null,e.toDisplayString(t.icon),1)]),e.createElementVNode("view",{class:"hot-info"},[e.createElementVNode("text",{class:"hot-title"},e.toDisplayString(t.title),1),e.createElementVNode("text",{class:"hot-subtitle"},e.toDisplayString(t.subtitle),1)]),e.createElementVNode("view",{class:"hot-arrow"},">")],8,["onClick"]))),128))])]),e.createElementVNode("view",{class:"guide-section"},[e.createElementVNode("view",{class:"section-header"},[e.createElementVNode("text",{class:"section-title"},"📋 办事指南")]),e.createElementVNode("view",{class:"guide-cards"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.guides,(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"guide-card",key:a,onClick:e=>i.viewGuide(t)},[e.createElementVNode("view",{class:"guide-header"},[e.createElementVNode("text",{class:"guide-title"},e.toDisplayString(t.title),1),e.createElementVNode("text",{class:"guide-tag"},e.toDisplayString(t.tag),1)]),e.createElementVNode("text",{class:"guide-desc"},e.toDisplayString(t.desc),1),e.createElementVNode("view",{class:"guide-steps"},[e.createElementVNode("text",{class:"steps-text"},e.toDisplayString(t.steps)+"个步骤",1)])],8,["onClick"]))),128))])])])}],["__scopeId","data-v-f33465ab"]]);const p=a({name:"GamesPage",data:()=>({userPoints:1580,activeCategory:0,gameCategories:["答题闯关","趣味游戏","签到任务","分享赚积分"],quizGames:[{icon:"🧠",title:"金融知识问答",desc:"答对10题获得积分",reward:50,badge:"热门"},{icon:"📚",title:"理财小课堂",desc:"学习理财知识",reward:30,badge:""},{icon:"💰",title:"投资达人",desc:"投资知识竞答",reward:100,badge:"高分"}],funGames:[{icon:"🎮",title:"农行大富翁",desc:"虚拟理财游戏",reward:80,badge:"新游戏"},{icon:"🎯",title:"幸运转盘",desc:"每日一次免费转",reward:20,badge:""},{icon:"🎲",title:"财富密码",desc:"猜数字赢积分",reward:60,badge:""}],checkInGames:[{icon:"📅",title:"每日签到",desc:"连续签到奖励更多",reward:10,badge:"每日"},{icon:"📱",title:"APP使用",desc:"使用APP功能",reward:5,badge:""},{icon:"💳",title:"绑定银行卡",desc:"绑卡获得积分",reward:200,badge:"一次性"}],shareGames:[{icon:"📤",title:"分享好友",desc:"邀请好友注册",reward:500,badge:"高奖励"},{icon:"📢",title:"朋友圈分享",desc:"分享优惠信息",reward:20,badge:""},{icon:"👥",title:"推荐产品",desc:"推荐理财产品",reward:100,badge:""}],activities:[{title:"新春积分翻倍",desc:"春节期间所有游戏积分翻倍",status:"进行中",time:"2024.01.01-2024.02.15",reward:"双倍积分"},{title:"理财达人挑战",desc:"连续30天完成理财任务",status:"即将开始",time:"2024.02.01-2024.02.29",reward:"1000积分+理财券"}],exchangeItems:[{icon:"☕",name:"星巴克咖啡券",points:2e3},{icon:"🎬",name:"电影票",points:1500},{icon:"📱",name:"话费充值券",points:1e3},{icon:"🎁",name:"京东购物券",points:800}]}),computed:{currentGames(){switch(this.activeCategory){case 0:default:return this.quizGames;case 1:return this.funGames;case 2:return this.checkInGames;case 3:return this.shareGames}}},methods:{switchCategory(e){this.activeCategory=e},signIn(){uni.showModal({title:"签到成功",content:"恭喜您获得10积分！连续签到7天可获得额外奖励",showCancel:!1}),this.userPoints+=10},viewPointsRule(){uni.showModal({title:"积分规则",content:"1. 每日签到获得10积分\n2. 完成游戏任务获得相应积分\n3. 积分可用于兑换礼品\n4. 积分有效期为1年",showCancel:!1})},viewPointsHistory(){uni.showToast({title:"跳转到积分明细页面",icon:"none"})},playGame(e){t("log","at pages/games/games.vue:303","开始游戏:",e),uni.showModal({title:e.title,content:`即将开始${e.title}，完成后可获得${e.reward}积分`,confirmText:"开始游戏",success:t=>{t.confirm&&setTimeout(()=>{uni.showToast({title:`恭喜获得${e.reward}积分！`,icon:"success"}),this.userPoints+=e.reward},2e3)}})},joinActivity(e){t("log","at pages/games/games.vue:324","参加活动:",e),uni.showToast({title:`参加${e.title}活动`,icon:"none"})},viewAllActivities(){uni.showToast({title:"查看全部活动",icon:"none"})},exchangeItem(e){this.userPoints<e.points?uni.showToast({title:"积分不足，无法兑换",icon:"none"}):uni.showModal({title:"确认兑换",content:`确定使用${e.points}积分兑换${e.name}吗？`,success:t=>{t.confirm&&(this.userPoints-=e.points,uni.showToast({title:"兑换成功！",icon:"success"}))}})},viewExchangeMall(){uni.showToast({title:"跳转到积分商城",icon:"none"})},goBack(){uni.navigateBack()}}},[["render",function(t,a,o,n,s,i){return e.openBlock(),e.createElementBlock("view",{class:"games-page"},[e.createElementVNode("view",{class:"page-header"},[e.createElementVNode("text",{class:"header-title"},"小豆乐园"),e.createElementVNode("text",{class:"header-subtitle"},"趣味游戏 积分奖励")]),e.createElementVNode("view",{class:"points-info"},[e.createElementVNode("view",{class:"points-card"},[e.createElementVNode("view",{class:"points-header"},[e.createElementVNode("text",{class:"points-title"},"我的积分"),e.createElementVNode("text",{class:"points-rule",onClick:a[0]||(a[0]=(...e)=>i.viewPointsRule&&i.viewPointsRule(...e))},"积分规则 >")]),e.createElementVNode("view",{class:"points-content"},[e.createElementVNode("text",{class:"points-number"},e.toDisplayString(s.userPoints),1),e.createElementVNode("text",{class:"points-unit"},"分")]),e.createElementVNode("view",{class:"points-actions"},[e.createElementVNode("button",{class:"action-btn primary",onClick:a[1]||(a[1]=(...e)=>i.signIn&&i.signIn(...e))},"每日签到"),e.createElementVNode("button",{class:"action-btn secondary",onClick:a[2]||(a[2]=(...e)=>i.viewPointsHistory&&i.viewPointsHistory(...e))},"积分明细")])])]),e.createElementVNode("view",{class:"game-categories"},[e.createElementVNode("view",{class:"category-tabs"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.gameCategories,(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["tab-item",{active:s.activeCategory===a}]),key:a,onClick:e=>i.switchCategory(a)},[e.createElementVNode("text",{class:"tab-text"},e.toDisplayString(t),1)],10,["onClick"]))),128))])]),e.createElementVNode("view",{class:"games-grid"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.currentGames,(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"game-item",key:a,onClick:e=>i.playGame(t)},[e.createElementVNode("view",{class:"game-cover"},[e.createElementVNode("text",{class:"game-icon"},e.toDisplayString(t.icon),1),t.badge?(e.openBlock(),e.createElementBlock("view",{key:0,class:"game-badge"},[e.createElementVNode("text",{class:"badge-text"},e.toDisplayString(t.badge),1)])):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"game-info"},[e.createElementVNode("text",{class:"game-title"},e.toDisplayString(t.title),1),e.createElementVNode("text",{class:"game-desc"},e.toDisplayString(t.desc),1),e.createElementVNode("view",{class:"game-reward"},[e.createElementVNode("text",{class:"reward-text"},"+"+e.toDisplayString(t.reward)+"积分",1)])])],8,["onClick"]))),128))]),e.createElementVNode("view",{class:"activity-section"},[e.createElementVNode("view",{class:"section-header"},[e.createElementVNode("text",{class:"section-title"},"🎉 活动专区"),e.createElementVNode("text",{class:"view-all",onClick:a[3]||(a[3]=(...e)=>i.viewAllActivities&&i.viewAllActivities(...e))},"查看全部")]),e.createElementVNode("view",{class:"activity-cards"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.activities,(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"activity-card",key:a,onClick:e=>i.joinActivity(t)},[e.createElementVNode("view",{class:"activity-header"},[e.createElementVNode("text",{class:"activity-title"},e.toDisplayString(t.title),1),e.createElementVNode("text",{class:"activity-status"},e.toDisplayString(t.status),1)]),e.createElementVNode("text",{class:"activity-desc"},e.toDisplayString(t.desc),1),e.createElementVNode("view",{class:"activity-footer"},[e.createElementVNode("text",{class:"activity-time"},e.toDisplayString(t.time),1),e.createElementVNode("text",{class:"activity-reward"},"奖励: "+e.toDisplayString(t.reward),1)])],8,["onClick"]))),128))])]),e.createElementVNode("view",{class:"exchange-section"},[e.createElementVNode("view",{class:"section-header"},[e.createElementVNode("text",{class:"section-title"},"🎁 积分商城"),e.createElementVNode("text",{class:"view-all",onClick:a[4]||(a[4]=(...e)=>i.viewExchangeMall&&i.viewExchangeMall(...e))},"更多好礼")]),e.createElementVNode("view",{class:"exchange-grid"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.exchangeItems,(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"exchange-item",key:a,onClick:e=>i.exchangeItem(t)},[e.createElementVNode("view",{class:"item-image"},[e.createElementVNode("text",{class:"item-icon"},e.toDisplayString(t.icon),1)]),e.createElementVNode("text",{class:"item-name"},e.toDisplayString(t.name),1),e.createElementVNode("text",{class:"item-points"},e.toDisplayString(t.points)+"积分",1),e.createElementVNode("button",{class:"exchange-btn",disabled:s.userPoints<t.points},e.toDisplayString(s.userPoints>=t.points?"立即兑换":"积分不足"),9,["disabled"])],8,["onClick"]))),128))])])])}],["__scopeId","data-v-96ab0953"]]);__definePage("pages/index/index",o),__definePage("pages/user/user",n),__definePage("pages/wealth/wealth",s),__definePage("pages/life/life",i),__definePage("pages/payment/payment",m),__definePage("pages/recharge/recharge",d),__definePage("pages/government/government",u),__definePage("pages/games/games",p),uni.invokePushCallback({type:"enabled",offline:!0}),Promise.resolve().then(()=>{"undefined"!=typeof plus&&plus.push&&plus.globalEvent.addEventListener("newPath",({path:e})=>{if(!e)return;const t=getCurrentPages(),a=t[t.length-1];a&&a.$page&&a.$page.fullPath===e||uni.navigateTo({url:e,fail(t){t.errMsg.indexOf("tabbar")>-1?uni.switchTab({url:e,fail(e){console.error(e.errMsg)}}):console.error(t.errMsg)}})})});const g={name:"App",onLaunch(e){t("log","at App.vue:10","App Launch",e),this.checkUpdate(),this.initUserInfo(),this.setSystemInfo(),this.initNetworkListener()},onShow(e){t("log","at App.vue:26","App Show",e),this.checkLoginStatus(),this.restoreAppState()},onHide(){t("log","at App.vue:36","App Hide"),this.saveAppState()},onError(e){t("error","at App.vue:43","App Error:",e),this.reportError(e)},onPageNotFound(e){t("log","at App.vue:50","Page Not Found:",e),uni.switchTab({url:"/pages/index/index"})},methods:{checkUpdate(){plus.runtime.getProperty(plus.runtime.appid,e=>{t("log","at App.vue:65","当前应用版本:",e.version)})},initUserInfo(){try{const e=uni.getStorageSync("userInfo");e&&(this.globalData.userInfo=e,t("log","at App.vue:79","用户信息已恢复:",e))}catch(e){t("error","at App.vue:82","恢复用户信息失败:",e)}},setSystemInfo(){try{const e=uni.getSystemInfoSync();this.globalData.systemInfo=e,t("log","at App.vue:93","系统信息:",e)}catch(e){t("error","at App.vue:95","获取系统信息失败:",e)}},initNetworkListener(){uni.onNetworkStatusChange(e=>{t("log","at App.vue:104","网络状态变化:",e),this.globalData.networkType=e.networkType,this.globalData.isConnected=e.isConnected,e.isConnected||uni.showToast({title:"网络连接已断开",icon:"none"})})},checkLoginStatus(){if(!uni.getStorageSync("userInfo")){const e=getCurrentPages(),t=e[e.length-1];t&&!t.route.includes("login")&&uni.navigateTo({url:"/login/login"})}},saveAppState(){try{const e={timestamp:Date.now(),userInfo:this.globalData.userInfo};uni.setStorageSync("appState",e)}catch(e){t("error","at App.vue:145","保存应用状态失败:",e)}},restoreAppState(){try{const e=uni.getStorageSync("appState");if(e){Date.now()-e.timestamp>864e5||(this.globalData.userInfo=e.userInfo)}}catch(e){t("error","at App.vue:163","恢复应用状态失败:",e)}},reportError(e){t("error","at App.vue:172","错误上报:",e)}},globalData:{userInfo:null,systemInfo:null,networkType:"unknown",isConnected:!0}};function h(e,a=""){var o;t("error","at main.js:364","Error Report:",{message:e.message||e,stack:e.stack,info:a,timestamp:(new Date).toISOString(),userAgent:uni.getSystemInfoSync(),url:(null==(o=getCurrentPages().pop())?void 0:o.route)||"unknown"})}"undefined"!=typeof window&&(window.addEventListener("error",e=>{t("error","at main.js:377","Global Error:",e.error),h(e.error,"Global Error")}),window.addEventListener("unhandledrejection",e=>{t("error","at main.js:382","Unhandled Promise Rejection:",e.reason),h(e.reason,"Unhandled Promise Rejection")}));const{app:y,Vuex:v,Pinia:w}=function(){const a=e.createVueApp(g);return a.config.errorHandler=(e,a,o)=>{t("error","at main.js:15","Vue Error:",e),t("error","at main.js:16","Error Info:",o),h(e,o),uni.showToast({title:"应用出现错误，请重试",icon:"none",duration:3e3})},a.config.warnHandler=(e,a,o)=>{t("warn","at main.js:31","Vue Warning:",e),t("warn","at main.js:32","Warning Trace:",o)},a.config.globalProperties.$app={version:"1.0.0",env:"production",platform:uni.getSystemInfoSync().platform,utils:{formatTime(e,t="YYYY-MM-DD HH:mm:ss"){const a=new Date(e),o=a.getFullYear(),n=String(a.getMonth()+1).padStart(2,"0"),s=String(a.getDate()).padStart(2,"0"),i=String(a.getHours()).padStart(2,"0"),r=String(a.getMinutes()).padStart(2,"0"),l=String(a.getSeconds()).padStart(2,"0");return t.replace("YYYY",o).replace("MM",n).replace("DD",s).replace("HH",i).replace("mm",r).replace("ss",l)},debounce(e,t){let a;return function(...o){clearTimeout(a),a=setTimeout(()=>{clearTimeout(a),e(...o)},t)}},throttle(e,t){let a;return function(){const o=arguments,n=this;a||(e.apply(n,o),a=!0,setTimeout(()=>a=!1,t))}},deepClone(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array)return e.map(e=>this.deepClone(e));if("object"==typeof e){const t={};for(const a in e)e.hasOwnProperty(a)&&(t[a]=this.deepClone(e[a]));return t}},generateId:()=>Date.now().toString(36)+Math.random().toString(36).substr(2),validatePhone:e=>/^1[3-9]\d{9}$/.test(e),validateEmail:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),validateIdCard:e=>/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(e)},request:{baseURL:"https://api.hospital.com",beforeRequest(e){const a=uni.getStorageSync("token");return a&&(e.header={...e.header,Authorization:`Bearer ${a}`}),e.url+=(e.url.includes("?")?"&":"?")+`_t=${Date.now()}`,t("log","at main.js:155","Request:",e),e},afterResponse:e=>(t("log","at main.js:161","Response:",e),401===e.statusCode?(uni.removeStorageSync("token"),uni.removeStorageSync("userInfo"),uni.showToast({title:"登录已过期，请重新登录",icon:"none"}),setTimeout(()=>{uni.navigateTo({url:"/login/login"})},1500),Promise.reject(e)):e),async request(e){const a=this.beforeRequest(e);try{const e=await new Promise((e,t)=>{uni.request({...a,success:e,fail:t})});return this.afterResponse(e)}catch(o){return t("error","at main.js:197","Request Error:",o),o.errMsg&&o.errMsg.includes("request:fail")&&uni.showToast({title:"网络连接失败，请检查网络设置",icon:"none"}),Promise.reject(o)}},get(e,t={}){return this.request({url:e,method:"GET",data:t})},post(e,t={}){return this.request({url:e,method:"POST",data:t})},put(e,t={}){return this.request({url:e,method:"PUT",data:t})},delete(e){return this.request({url:e,method:"DELETE"})}},storage:{set(e,a,o=null){const n={value:a,timestamp:Date.now()};o&&(n.expire=o);try{uni.setStorageSync(e,JSON.stringify(n))}catch(s){t("error","at main.js:263","Storage Set Error:",s)}},get(e,a=null){try{const t=uni.getStorageSync(e);if(!t)return a;const o=JSON.parse(t);return o.expire&&Date.now()-o.timestamp>o.expire?(this.remove(e),a):o.value}catch(o){return t("error","at main.js:283","Storage Get Error:",o),a}},remove(e){try{uni.removeStorageSync(e)}catch(a){t("error","at main.js:293","Storage Remove Error:",a)}},clear(){try{uni.clearStorageSync()}catch(e){t("error","at main.js:302","Storage Clear Error:",e)}}}},a.mixin({onLoad(e){t("log","at main.js:312","Page Load:",this.$options.name,e),this.pageStartTime=Date.now()},onShow(){t("log","at main.js:319","Page Show:",this.$options.name)},onHide(){if(t("log","at main.js:323","Page Hide:",this.$options.name),this.pageStartTime){const e=Date.now()-this.pageStartTime;t("log","at main.js:328","Page Duration:",this.$options.name,e+"ms")}},onUnload(){t("log","at main.js:333","Page Unload:",this.$options.name)},onError(e){t("error","at main.js:338","Page Error:",this.$options.name,e),h(e,`Page: ${this.$options.name}`)}}),{app:a}}();uni.Vuex=v,uni.Pinia=w,y.provide("__globalStyles",__uniConfig.styles),y._component.mpType="app",y._component.render=()=>{},y.mount("#app")}(Vue);
