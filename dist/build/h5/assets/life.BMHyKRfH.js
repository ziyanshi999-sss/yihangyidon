import{v as e,s as t,x as a,y as o,n as r}from"./index-M9oHmXK2.js";const n=n=>new Promise((i,s)=>{let c={url:"https://api.abchina.com"+n.url,method:n.method||"GET",data:n.data||{},header:n.header||{},timeout:n.timeout||1e4};c=(e=>{const t=a("token");return t&&(e.header={...e.header,Authorization:`Bearer ${t}`}),e.header={"Content-Type":"application/json","X-Client-Type":"uni-app",...e.header},e})(c),e({...c,success:e=>{try{const a=(e=>{const{statusCode:a,data:n}=e;return 200===a?0===n.code?n.data:(t({title:n.message||"请求失败",icon:"none"}),Promise.reject(n)):401===a?(o("token"),o("userInfo"),r({url:"/login/login"}),Promise.reject("登录已过期")):(t({title:"网络错误，请稍后重试",icon:"none"}),Promise.reject("网络错误"))})(e);i(a)}catch(a){s(a)}},fail:e=>{console.error("请求失败:",e),t({title:"网络连接失败",icon:"none"}),s(e)}})}),i=(e,t={})=>n({url:e+(Object.keys(t).length?"?"+new URLSearchParams(t).toString():""),method:"GET"}),s=(e,t={})=>n({url:e,method:"POST",data:t}),c=e=>s("/life/payment",e),l=e=>s("/life/recharge",e),d=e=>i("/life/payment-history",e),h=e=>s("/life/utility/query",e);export{d as g,l as m,c as p,h as q};
