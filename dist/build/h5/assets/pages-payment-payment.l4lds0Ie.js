import{c as e,w as t,n as a,l as s,s as l,m as o,i as n,o as r,b as m,p as d,e as i,d as u,h as c,F as y,r as p,j as b,t as f,I as h,q as _}from"./index-M9oHmXK2.js";import{g as F,p as g,q as C}from"./life.BMHyKRfH.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";const T=w({name:"PaymentPage",data:()=>({selectedType:null,paymentForm:{number:"",address:"",amount:""},paymentTypes:[{icon:"ðŸ’¡",label:"ç”µè´¹",bgColor:"#FFD700",type:"electric",numberLabel:"ç”µè´¹æˆ·å·",showAddress:!0},{icon:"ðŸ’§",label:"æ°´è´¹",bgColor:"#1E90FF",type:"water",numberLabel:"æ°´è´¹æˆ·å·",showAddress:!0},{icon:"ðŸ”¥",label:"ç‡ƒæ°”è´¹",bgColor:"#FF6347",type:"gas",numberLabel:"ç‡ƒæ°”æˆ·å·",showAddress:!0},{icon:"ðŸ“±",label:"è¯è´¹",bgColor:"#32CD32",type:"phone",numberLabel:"æ‰‹æœºå·ç ",showAddress:!1},{icon:"ðŸ“º",label:"æœ‰çº¿ç”µè§†",bgColor:"#9370DB",type:"tv",numberLabel:"ç”¨æˆ·ç¼–å·",showAddress:!0},{icon:"ðŸŒ",label:"å®½å¸¦è´¹",bgColor:"#FF1493",type:"internet",numberLabel:"å®½å¸¦è´¦å·",showAddress:!0}],paymentHistory:[{typeIcon:"ðŸ’¡",title:"ç”µè´¹ç¼´è´¹",detail:"æˆ·å·: 123456789",amount:"156.80",status:"æˆåŠŸ"},{typeIcon:"ðŸ’§",title:"æ°´è´¹ç¼´è´¹",detail:"æˆ·å·: 987654321",amount:"89.50",status:"æˆåŠŸ"},{typeIcon:"ðŸ“±",title:"è¯è´¹å……å€¼",detail:"æ‰‹æœº: 138****8888",amount:"100.00",status:"æˆåŠŸ"}]}),computed:{canSubmit(){return this.paymentForm.number&&this.paymentForm.amount&&(!this.selectedType.showAddress||this.paymentForm.address)}},onLoad(){this.loadPaymentHistory()},methods:{selectPaymentType(e){this.selectedType=e,this.paymentForm={number:"",address:"",amount:""}},async queryBill(){if(this.paymentForm.number)try{s({title:"æŸ¥è¯¢ä¸­..."});const e=await C({type:this.selectedType.type,number:this.paymentForm.number,address:this.paymentForm.address});e.amount?(this.paymentForm.amount=e.amount.toString(),l({title:"æŸ¥è¯¢æˆåŠŸ",icon:"success"})):l({title:"æš‚æ— å¾…ç¼´è´¹ç”¨",icon:"none"})}catch(e){l({title:"æŸ¥è¯¢å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•",icon:"none"})}finally{o()}else l({title:`è¯·è¾“å…¥${this.selectedType.numberLabel}`,icon:"none"})},async submitPayment(){if(this.canSubmit)try{s({title:"ç¼´è´¹ä¸­..."}),await g({type:this.selectedType.type,number:this.paymentForm.number,address:this.paymentForm.address,amount:parseFloat(this.paymentForm.amount)}),l({title:"ç¼´è´¹æˆåŠŸ",icon:"success"}),this.loadPaymentHistory(),this.paymentForm={number:"",address:"",amount:""}}catch(e){l({title:"ç¼´è´¹å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•",icon:"none"})}finally{o()}},async loadPaymentHistory(){try{const e=await F({limit:3});this.paymentHistory=e}catch(e){console.error("åŠ è½½ç¼´è´¹è®°å½•å¤±è´¥:",e)}},viewAllHistory(){a({url:"/pages/payment-history/payment-history"})}}},[["render",function(a,s,l,o,F,g){const C=i,w=n,T=h,k=_;return r(),e(w,{class:"payment-page"},{default:t(()=>[m(w,{class:"page-header"},{default:t(()=>[m(C,{class:"header-title"},{default:t(()=>[u("ç”Ÿæ´»ç¼´è´¹")]),_:1}),m(C,{class:"header-subtitle"},{default:t(()=>[u("æ°´ç”µç‡ƒæ°”ä¸€é”®æ”¯ä»˜")]),_:1})]),_:1}),m(w,{class:"payment-types"},{default:t(()=>[m(w,{class:"types-grid"},{default:t(()=>[(r(!0),c(y,null,p(F.paymentTypes,(a,s)=>(r(),e(w,{class:"type-item",key:s,onClick:e=>g.selectPaymentType(a)},{default:t(()=>[m(w,{class:"type-icon",style:b({backgroundColor:a.bgColor})},{default:t(()=>[m(C,{class:"icon-text"},{default:t(()=>[u(f(a.icon),1)]),_:2},1024)]),_:2},1032,["style"]),m(C,{class:"type-label"},{default:t(()=>[u(f(a.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),F.selectedType?(r(),e(w,{key:0,class:"payment-form"},{default:t(()=>[m(w,{class:"form-section"},{default:t(()=>[m(w,{class:"section-title"},{default:t(()=>[m(C,null,{default:t(()=>[u(f(F.selectedType.label)+"ç¼´è´¹",1)]),_:1})]),_:1}),m(w,{class:"form-item"},{default:t(()=>[m(C,{class:"form-label"},{default:t(()=>[u(f(F.selectedType.numberLabel),1)]),_:1}),m(T,{class:"form-input",modelValue:F.paymentForm.number,"onUpdate:modelValue":s[0]||(s[0]=e=>F.paymentForm.number=e),placeholder:`è¯·è¾“å…¥${F.selectedType.numberLabel}`,type:"text"},null,8,["modelValue","placeholder"])]),_:1}),F.selectedType.showAddress?(r(),e(w,{key:0,class:"form-item"},{default:t(()=>[m(C,{class:"form-label"},{default:t(()=>[u("ç¼´è´¹åœ°å€")]),_:1}),m(T,{class:"form-input",modelValue:F.paymentForm.address,"onUpdate:modelValue":s[1]||(s[1]=e=>F.paymentForm.address=e),placeholder:"è¯·è¾“å…¥è¯¦ç»†åœ°å€",type:"text"},null,8,["modelValue"])]),_:1})):d("",!0),m(w,{class:"form-item"},{default:t(()=>[m(C,{class:"form-label"},{default:t(()=>[u("ç¼´è´¹é‡‘é¢")]),_:1}),m(T,{class:"form-input amount-input",modelValue:F.paymentForm.amount,"onUpdate:modelValue":s[2]||(s[2]=e=>F.paymentForm.amount=e),placeholder:"è¯·è¾“å…¥ç¼´è´¹é‡‘é¢",type:"digit"},null,8,["modelValue"])]),_:1})]),_:1}),m(w,{class:"payment-actions"},{default:t(()=>[m(k,{class:"query-btn",onClick:g.queryBill},{default:t(()=>[u("æŸ¥è¯¢è´¦å•")]),_:1},8,["onClick"]),m(k,{class:"pay-btn",onClick:g.submitPayment,disabled:!g.canSubmit},{default:t(()=>[u(" ç«‹å³ç¼´è´¹ ")]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})):d("",!0),m(w,{class:"payment-history"},{default:t(()=>[m(w,{class:"history-header"},{default:t(()=>[m(C,{class:"history-title"},{default:t(()=>[u("æœ€è¿‘ç¼´è´¹è®°å½•")]),_:1}),m(C,{class:"view-all",onClick:g.viewAllHistory},{default:t(()=>[u("æŸ¥çœ‹å…¨éƒ¨")]),_:1},8,["onClick"])]),_:1}),m(w,{class:"history-list"},{default:t(()=>[(r(!0),c(y,null,p(F.paymentHistory,(a,s)=>(r(),e(w,{class:"history-item",key:s},{default:t(()=>[m(w,{class:"record-icon"},{default:t(()=>[m(C,null,{default:t(()=>[u(f(a.typeIcon),1)]),_:2},1024)]),_:2},1024),m(w,{class:"record-info"},{default:t(()=>[m(C,{class:"record-title"},{default:t(()=>[u(f(a.title),1)]),_:2},1024),m(C,{class:"record-detail"},{default:t(()=>[u(f(a.detail),1)]),_:2},1024)]),_:2},1024),m(w,{class:"record-amount"},{default:t(()=>[m(C,{class:"amount"},{default:t(()=>[u("-Â¥"+f(a.amount),1)]),_:2},1024),m(C,{class:"status"},{default:t(()=>[u(f(a.status),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})}],["__scopeId","data-v-b83823eb"]]);export{T as default};
